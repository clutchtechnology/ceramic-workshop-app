# 回转窑页面 UI 设计 - ASCII 线框图

## 页面布局 (1920×1080)

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│  Header (48px): 回转窑监控系统 | PLC连接状态 | 当前时间 | 刷新时间                          │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                        料仓重量监控区域 (Hopper Monitoring)                         │  │
│  ├───────────────────────────────────────────────────────────────────────────────────────┤  │
│  │                                                                                       │  │
│  │  料仓示意图：                                                                         │  │
│  │      ┌──────────────────────────────────────┐                                        │  │
│  │      │                                      │                                        │  │
│  │      │        料仓 (Hopper)                 │  当前重量：12,500 kg (62.5%)          │  │
│  │      │                                      │  总容量：20,000 kg                    │  │
│  │      │                                      │  下料速度：350 kg/h                   │  │
│  │      │                                      │  状态：● 正常 (绿色)                  │  │
│  │      │                                      │                                        │  │
│  │      │  [容量百分比进度条: ████████░░░░]   │                                        │  │
│  │      │                                      │                                        │  │
│  │      └──────────────┬───────────────────────┘                                        │  │
│  │                     │                                                                 │  │
│  │                     ▼                                                                 │  │
│  │              ┌──────────────┐                                                         │  │
│  │              │振动给料机     │  功率：2.5 kW                                           │  │
│  │              │(Feeder)      │  状态：● 运行中                                         │  │
│  │              └──────┬───────┘                                                         │  │
│  │                     │                                                                 │  │
│  │                     ▼                                                                 │  │
│  │                                                                                       │  │
│  │  [实时趋势图表 - 料仓重量变化曲线]                                                    │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐   │  │
│  │  │ 重量(kg)                                                                     │   │  │
│  │  │  20000 ┤                                                                    │   │  │
│  │  │  15000 ┤      ╱╲                                                           │   │  │
│  │  │  10000 ┤    ╱    ╲                                                         │   │  │
│  │  │   5000 ┤  ╱        ╲                                                       │   │  │
│  │  │      0 └───────────────────────────────────────────────────────────────   │   │  │
│  │  │        0s   10s   20s   30s   40s   50s   60s (时间)                      │   │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                       │  │
│  └───────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                        回转窑监控区域 (Rotary Kiln Monitoring)                      │  │
│  ├───────────────────────────────────────────────────────────────────────────────────────┤  │
│  │                                                                                       │  │
│  │  回转窑示意图：                                                                       │  │
│  │                                                                                       │  │
│  │  ┌───────────────────────────────────────────────────────────────────────────────┐   │  │
│  │  │                                                                               │   │  │
│  │  │  进料端 850°C ────→ 中段 1,200°C ────→ 出料端 950°C                            │   │  │
│  │  │                                                                               │   │  │
│  │  │  [温度分布可视化]                                                             │   │  │
│  │  │  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐                   │   │  │
│  │  │  │850°│ │920°│ │1050│ │1200│ │1150│ │1000│ │980°│ │950°│  8温区温度        │   │  │
│  │  │  └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘                   │   │  │
│  │  │                                                                               │   │  │
│  │  │  平均温度：1,050°C                                                            │   │  │
│  │  │  运行状态：● 运行中 (绿色)                                                     │   │  │
│  │  │                                                                               │   │  │
│  │  └───────────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                       │  │
│  │  能耗数据：                                                                           │  │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                             │  │
│  │  │ 电压          │  │ 电流          │  │ 功率          │                             │  │
│  │  │ 380 V         │  │ 85 A          │  │ 32.3 kW       │                             │  │
│  │  └──────────────┘  └──────────────┘  └──────────────┘                             │  │
│  │                                                                                       │  │
│  │  下料速度：                                                                           │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐   │  │
│  │  │ 速度：350 kg/h                                                               │   │  │
│  │  │ [速度趋势曲线图]                                                             │   │  │
│  │  │ ┌───────────────────────────────────────────────────────────────────────┐   │   │  │
│  │  │ │ 速度(kg/h)                                                            │   │   │  │
│  │  │ │  400 ┤                                                                │   │   │  │
│  │  │ │  350 ┤      ╱╲                                                       │   │   │  │
│  │  │ │  300 ┤    ╱    ╲                                                     │   │   │  │
│  │  │ │  250 ┤  ╱        ╲                                                   │   │   │  │
│  │  │ │  200 └─────────────────────────────────────────────────────────────── │   │   │  │
│  │  │ │        0s   10s   20s   30s   40s   50s   60s (时间)                │   │   │  │
│  │  │ └───────────────────────────────────────────────────────────────────────┘   │   │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                       │  │
│  │  [温度趋势图表 - 8温区温度曲线对比]                                                   │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐   │  │
│  │  │ 温度(°C)                                                                    │   │  │
│  │  │  1200 ┤                                                                    │   │  │
│  │  │  1100 ┤    ╱╲                                                             │   │  │
│  │  │  1000 ┤  ╱  ╲                                                             │   │  │
│  │  │   900 ┤╱    ╲                                                             │   │  │
│  │  │   800 └───────────────────────────────────────────────────────────────     │   │  │
│  │  │        0s   10s   20s   30s   40s   50s   60s (时间)                      │   │  │
│  │  │  图例: ─ 温区1  ─ 温区2  ─ 温区3  ─ 温区4  ─ 温区5  ─ 温区6  ─ 温区7  ─ 温区8│   │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                       │  │
│  └───────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│  Footer (32px): PLC连接状态 | 最后刷新时间 | 版本号                                        │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

## 数据标注说明

### 料仓区域数据标注点：
- **位置1**: 料仓顶部 - 显示当前重量数值
- **位置2**: 料仓中部 - 显示容量百分比进度条
- **位置3**: 料仓底部 - 显示下料速度
- **位置4**: 振动给料机 - 显示功率和运行状态
- **位置5**: 料仓下方 - 实时趋势图表

### 回转窑区域数据标注点：
- **位置1**: 窑体上方 - 显示8个温区温度值
- **位置2**: 窑体中部 - 显示平均温度和运行状态
- **位置3**: 窑体下方 - 显示能耗数据（电压/电流/功率）
- **位置4**: 窑体右侧 - 显示下料速度及趋势图
- **位置5**: 窑体下方 - 显示8温区温度对比趋势图

## UI 组件映射

| ASCII 元素 | Flutter Widget | 说明 |
|-----------|---------------|------|
| `┌─┐│└┘` | `Container` + `Border` | 面板边框 |
| `料仓示意图` | `CustomPaint` 或 `SvgPicture` | 自定义绘制料仓图形 |
| `回转窑示意图` | `CustomPaint` 或 `SvgPicture` | 自定义绘制回转窑图形 |
| `温度数值` | `DataDisplay` | 大字号数值显示 |
| `进度条` | `HmiProgressBar` | 容量百分比进度条 |
| `趋势图表` | `fl_chart.LineChart` | 实时趋势曲线 |
| `状态指示` | `StatusIndicator` | 运行状态圆点 |
| `KPI卡片` | `KpiCard` | 能耗数据卡片 |

## 颜色方案

- **料仓区域**: 深蓝/青色主题 (`HmiColors.dataCyan`)
- **回转窑区域**: 橙色/红色主题 (`HmiColors.dataOrange`)
- **正常状态**: 绿色 (`HmiColors.statusNormal`)
- **告警状态**: 红色 (`HmiColors.statusAlarm`)
- **背景**: 深色 (`HmiColors.bgPrimary`)

## 实时数据更新

- **刷新频率**: 1秒
- **数据来源**: PLC DB20 (回转窑数据块)
- **图表数据**: 保留最近60秒数据，滚动更新

---

## 完整布局 - 3台回转窑版本

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│  Header (48px): 回转窑监控系统 | PLC连接状态 | 当前时间 | 刷新时间                          │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                        料仓重量监控区域 (3个料仓)                                     │  │
│  ├───────────────────────────────────────────────────────────────────────────────────────┤  │
│  │                                                                                       │  │
│  │  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐                          │  │
│  │  │  料仓1       │    │  料仓2       │    │  料仓3       │                          │  │
│  │  │              │    │              │    │              │                          │  │
│  │  │  12,500 kg   │    │  15,200 kg   │    │  8,500 kg    │                          │  │
│  │  │  (62.5%)     │    │  (76.0%)     │    │  (42.5%)     │                          │  │
│  │  │              │    │              │    │              │                          │  │
│  │  │  [██████░░]  │    │  [███████░]  │    │  [████░░░░]  │                          │  │
│  │  │              │    │              │    │              │                          │  │
│  │  │  下料:350kg/h│    │  下料:420kg/h│    │  下料:280kg/h│                          │  │
│  │  │  状态:●正常  │    │  状态:●正常  │    │  状态:⚠告警  │                          │  │
│  │  └──────┬───────┘    └──────┬───────┘    └──────┬───────┘                          │  │
│  │         │                   │                   │                                   │  │
│  │         ▼                   ▼                   ▼                                   │  │
│  │    ┌─────────┐        ┌─────────┐        ┌─────────┐                             │  │
│  │    │给料机1   │        │给料机2   │        │给料机3   │                             │  │
│  │    │2.5 kW   │        │3.0 kW   │        │2.0 kW   │                             │  │
│  │    └─────────┘        └─────────┘        └─────────┘                             │  │
│  │                                                                                       │  │
│  │  [料仓重量趋势图表 - 3条曲线对比]                                                     │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐   │  │
│  │  │ 重量(kg)                                                                     │   │  │
│  │  │  20000 ┤                                                                    │   │  │
│  │  │  15000 ┤      ╱╲        ╱╲                                                │   │  │
│  │  │  10000 ┤    ╱    ╲    ╱    ╲                                              │   │  │
│  │  │   5000 ┤  ╱        ╲╱        ╲                                            │   │  │
│  │  │      0 └───────────────────────────────────────────────────────────────   │   │  │
│  │  │        0s   10s   20s   30s   40s   50s   60s (时间)                      │   │  │
│  │  │  图例: ─ 料仓1  ─ 料仓2  ─ 料仓3                                           │   │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘   │  │
│  └───────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────────────────────┐  │
│  │                        回转窑监控区域 (3台回转窑)                                     │  │
│  ├───────────────────────────────────────────────────────────────────────────────────────┤  │
│  │                                                                                       │  │
│  │  ┌───────────────────────────────────────────────────────────────────────────────┐   │  │
│  │  │  1号回转窑                                                                     │   │  │
│  │  │  ┌─────────────────────────────────────────────────────────────────────────┐   │   │  │
│  │  │  │ 进料端 850°C ────→ 中段 1,200°C ────→ 出料端 950°C                      │   │   │  │
│  │  │  │                                                                         │   │   │  │
│  │  │  │  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐           │   │   │  │
│  │  │  │  │850°│ │920°│ │1050│ │1200│ │1150│ │1000│ │980°│ │950°│  8温区    │   │   │  │
│  │  │  │  └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘           │   │   │  │
│  │  │  │                                                                         │   │   │  │
│  │  │  │  平均温度：1,050°C  状态：● 运行中                                      │   │   │  │
│  │  │  │  电压：380V  电流：85A  功率：32.3kW                                    │   │   │  │
│  │  │  │  下料速度：350 kg/h                                                     │   │   │  │
│  │  │  └─────────────────────────────────────────────────────────────────────────┘   │   │  │
│  │  └───────────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                       │  │
│  │  ┌───────────────────────────────────────────────────────────────────────────────┐   │  │
│  │  │  2号回转窑                                                                     │   │  │
│  │  │  ┌─────────────────────────────────────────────────────────────────────────┐   │   │  │
│  │  │  │ 进料端 880°C ────→ 中段 1,180°C ────→ 出料端 920°C                      │   │   │  │
│  │  │  │                                                                         │   │   │  │
│  │  │  │  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐           │   │   │  │
│  │  │  │  │880°│ │950°│ │1020│ │1180│ │1120│ │980°│ │960°│ │920°│  8温区    │   │   │  │
│  │  │  │  └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘           │   │   │  │
│  │  │  │                                                                         │   │   │  │
│  │  │  │  平均温度：1,000°C  状态：● 运行中                                      │   │   │  │
│  │  │  │  电压：375V  电流：78A  功率：29.3kW                                    │   │   │  │
│  │  │  │  下料速度：420 kg/h                                                     │   │   │  │
│  │  │  └─────────────────────────────────────────────────────────────────────────┘   │   │  │
│  │  └───────────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                       │  │
│  │  ┌───────────────────────────────────────────────────────────────────────────────┐   │  │
│  │  │  3号回转窑                                                                     │   │  │
│  │  │  ┌─────────────────────────────────────────────────────────────────────────┐   │   │  │
│  │  │  │ 进料端 820°C ────→ 中段 1,150°C ────→ 出料端 900°C                      │   │   │  │
│  │  │  │                                                                         │   │   │  │
│  │  │  │  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐           │   │   │  │
│  │  │  │  │820°│ │890°│ │980°│ │1150│ │1080│ │950°│ │920°│ │900°│  8温区    │   │   │  │
│  │  │  │  └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘           │   │   │  │
│  │  │  │                                                                         │   │   │  │
│  │  │  │  平均温度：950°C  状态：● 运行中                                        │   │   │  │
│  │  │  │  电压：385V  电流：72A  功率：27.7kW                                    │   │   │  │
│  │  │  │  下料速度：280 kg/h                                                     │   │   │  │
│  │  │  └─────────────────────────────────────────────────────────────────────────┘   │   │  │
│  │  └───────────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                       │  │
│  │  [温度趋势图表 - 3台回转窑平均温度对比]                                               │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐   │  │
│  │  │ 温度(°C)                                                                    │   │  │
│  │  │  1200 ┤                                                                    │   │  │
│  │  │  1100 ┤    ╱╲                                                             │   │  │
│  │  │  1000 ┤  ╱  ╲    ╱╲                                                       │   │  │
│  │  │   900 ┤╱    ╲╱  ╲                                                         │   │  │
│  │  │   800 └───────────────────────────────────────────────────────────────     │   │  │
│  │  │        0s   10s   20s   30s   40s   50s   60s (时间)                      │   │  │
│  │  │  图例: ─ 1号窑  ─ 2号窑  ─ 3号窑                                           │   │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                       │  │
│  │  [功率趋势图表 - 3台回转窑功率对比]                                                   │  │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐   │  │
│  │  │ 功率(kW)                                                                     │   │  │
│  │  │    40 ┤                                                                    │   │  │
│  │  │    35 ┤      ╱╲                                                           │   │  │
│  │  │    30 ┤    ╱    ╲    ╱╲                                                   │   │  │
│  │  │    25 ┤  ╱        ╲╱  ╲                                                   │   │  │
│  │  │    20 └───────────────────────────────────────────────────────────────     │   │  │
│  │  │        0s   10s   20s   30s   40s   50s   60s (时间)                      │   │  │
│  │  │  图例: ─ 1号窑  ─ 2号窑  ─ 3号窑                                           │   │  │
│  │  └─────────────────────────────────────────────────────────────────────────────┘   │  │
│  │                                                                                       │  │
│  └───────────────────────────────────────────────────────────────────────────────────────┘  │
│                                                                                             │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│  Footer (32px): PLC连接状态 | 最后刷新时间 | 版本号                                        │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

## 布局说明

### 料仓区域 (顶部)
- **3个料仓并排显示**，每个料仓显示：
  - 实时重量和容量百分比
  - 容量进度条（可视化料位）
  - 下料速度
  - 运行状态（正常/告警）
- **3个给料机**，显示功率和状态
- **趋势图表**：3条曲线对比3个料仓的重量变化

### 回转窑区域 (中部)
- **3台回转窑垂直排列**，每台显示：
  - 回转窑示意图（水平长条形）
  - 8个温区温度值（小卡片形式）
  - 平均温度、运行状态
  - 能耗数据（电压/电流/功率）
  - 下料速度
- **对比趋势图表**：
  - 温度趋势：3条曲线对比3台窑的平均温度
  - 功率趋势：3条曲线对比3台窑的功率消耗

## 数据标注位置

### 料仓数据标注：
1. **料仓顶部**：重量数值（大字号）
2. **料仓中部**：容量百分比进度条
3. **料仓底部**：下料速度和状态
4. **给料机**：功率和运行状态
5. **图表区域**：实时趋势曲线

### 回转窑数据标注：
1. **窑体上方**：8温区温度卡片
2. **窑体中部**：平均温度和运行状态
3. **窑体下方**：能耗数据（电压/电流/功率）
4. **窑体右侧**：下料速度
5. **底部图表**：温度/功率趋势对比

## 实现建议

### Widget 结构：
```dart
Column(
  children: [
    // 料仓监控区域
    HopperMonitoringSection(
      hoppers: [hopper1, hopper2, hopper3],
    ),
    
    // 回转窑监控区域
    Column(
      children: [
        RotaryKilnCard(kiln: kiln1),
        RotaryKilnCard(kiln: kiln2),
        RotaryKilnCard(kiln: kiln3),
      ],
    ),
    
    // 趋势图表区域
    Row(
      children: [
        TemperatureTrendChart(kilns: [kiln1, kiln2, kiln3]),
        PowerTrendChart(kilns: [kiln1, kiln2, kiln3]),
      ],
    ),
  ],
)
```

